import zip from 'lodash.zipobject'

// message data {"h":["order-book.LYM-ETH.1E-7","2","s"],"d":{"bids":[["0.0001787","1","300"],["0.0001786","1","3700"],["0.0001785","1","1229.8867"],["0.0001784","1","300"],["0.0001649","1","2000"],["0.00016","1","1700"],["0.0001599","2","2252"],["0.000157","1","255"],["0.0001516","2","14287"],["0.0001515","1","25000"],["0.000145","1","2000"],["0.0001449","2","2300"],["0.0001432","1","300"],["0.0001416","1","300"],["0.0001405","1","710"],["0.0001402","2","600"],["0.0001389","1","300"],["0.0001378","1","300"],["0.0001368","1","300"],["0.000136","1","244.9649"],["0.0001353","1","300"],["0.0001348","1","300"],["0.0001345","1","303"],["0.0001343","1","300"],["0.0001336","1","300"],["0.000133","1","303"],["0.0001317","1","303"],["0.000131","1","258.66412213"],["0.0001305","1","303"],["0.0001295","1","303"],["0.0001288","4","11319.13431618"],["0.0001286","1","303"],["0.0001285","1","1000"],["0.0001278","1","303"],["0.0001272","1","303"],["0.0001268","3","16179.26793591"],["0.0001267","2","11724.28991189"],["0.0001262","1","303"],["0.0001256","1","303"],["0.0001251","1","48063.889"],["0.00011","1","406.50000002"],["0.0001088","1","500"],["0.0001085","1","740"],["0.0001022","1","2500"],["0.0001","3","4700"],["0.0000956","1","500"],["0.00009","1","1764.59467364"],["0.000088","1","4250"],["0.000085","1","179.63641492"],["0.000083","1","794"],["0.0000828","1","600"],["0.00008","1","1000"],["0.000072","1","536"],["0.0000688","1","1000"],["0.0000676","1","300"],["0.0000651","1","1000"],["0.000065","1","4000"],["0.00006","1","3227.52"],["0.000059","1","2000"],["0.0000554","1","883.99995125"],["0.000055","1","700"],["0.0000515","1","5000"],["0.00005","1","500"],["0.0000372","1","3752.06606794"],["0.000035","1","1136.67978552"],["0.0000324","1","8000"],["0.0000321","1","1004"],["0.000032","1","3150"],["0.0000303","1","1500"],["0.0000129","1","9219.04418604"],["0.00001","1","8048.6852823"],["0.0000077","1","2337.666"],["0.000002","1","20000"],["0.0000011","1","7500"],["0.000001","1","10000"],["0.0000001","1","500000"]],"asks":[["0.0001894","1","303"],["0.0001895","1","2240.5458"],["0.0001907","1","650"],["0.0001925","1","300"],["0.0001947","1","1349.99967279"],["0.0001949","1","610"],["0.000195","1","10000"],["0.0001976","1","10585.24028"],["0.0001987","1","3051"],["0.000199","1","20000"],["0.0001998","1","4254.99789805"],["0.0002","4","2830"],["0.0002006","1","1000"],["0.00023","1","6017.01162474"],["0.0002455","1","600"],["0.00025","3","12300"],["0.0002789","1","503"],["0.000279","1","2001"],["0.0002799","1","200000"],["0.0002999","1","5000"],["0.0003","2","1645.241116"],["0.000389","1","200000"],["0.0004","1","250"],["0.000425","1","50000"],["0.00045","1","50000"],["0.0005","2","20000"],["0.000535","1","10000"],["0.002","1","10000"],["0.09","2","5032.5551584"],["0.1","1","6333.84"],["1","2","195451"],["5","1","10000"],["8.075","1","2000"],["10","1","20000"],["11","1","5819.4995771"]]}}
const orderBook = {"bids":[["0.0001787","1","300"],["0.0001786","1","3700"],["0.0001785","1","1229.8867"],["0.0001784","1","300"],["0.0001649","1","2000"],["0.00016","1","1700"],["0.0001599","2","2252"],["0.000157","1","255"],["0.0001516","2","14287"],["0.0001515","1","25000"],["0.000145","1","2000"],["0.0001449","2","2300"],["0.0001432","1","300"],["0.0001416","1","300"],["0.0001405","1","710"],["0.0001402","2","600"],["0.0001389","1","300"],["0.0001378","1","300"],["0.0001368","1","300"],["0.000136","1","244.9649"],["0.0001353","1","300"],["0.0001348","1","300"],["0.0001345","1","303"],["0.0001343","1","300"],["0.0001336","1","300"],["0.000133","1","303"],["0.0001317","1","303"],["0.000131","1","258.66412213"],["0.0001305","1","303"],["0.0001295","1","303"],["0.0001288","4","11319.13431618"],["0.0001286","1","303"],["0.0001285","1","1000"],["0.0001278","1","303"],["0.0001272","1","303"],["0.0001268","3","16179.26793591"],["0.0001267","2","11724.28991189"],["0.0001262","1","303"],["0.0001256","1","303"],["0.0001251","1","48063.889"],["0.00011","1","406.50000002"],["0.0001088","1","500"],["0.0001085","1","740"],["0.0001022","1","2500"],["0.0001","3","4700"],["0.0000956","1","500"],["0.00009","1","1764.59467364"],["0.000088","1","4250"],["0.000085","1","179.63641492"],["0.000083","1","794"],["0.0000828","1","600"],["0.00008","1","1000"],["0.000072","1","536"],["0.0000688","1","1000"],["0.0000676","1","300"],["0.0000651","1","1000"],["0.000065","1","4000"],["0.00006","1","3227.52"],["0.000059","1","2000"],["0.0000554","1","883.99995125"],["0.000055","1","700"],["0.0000515","1","5000"],["0.00005","1","500"],["0.0000372","1","3752.06606794"],["0.000035","1","1136.67978552"],["0.0000324","1","8000"],["0.0000321","1","1004"],["0.000032","1","3150"],["0.0000303","1","1500"],["0.0000129","1","9219.04418604"],["0.00001","1","8048.6852823"],["0.0000077","1","2337.666"],["0.000002","1","20000"],["0.0000011","1","7500"],["0.000001","1","10000"],["0.0000001","1","500000"]],"asks":[["0.0001894","1","303"],["0.0001895","1","2240.5458"],["0.0001907","1","650"],["0.0001925","1","300"],["0.0001947","1","1349.99967279"],["0.0001949","1","610"],["0.000195","1","10000"],["0.0001976","1","10585.24028"],["0.0001987","1","3051"],["0.000199","1","20000"],["0.0001998","1","4254.99789805"],["0.0002","4","2830"],["0.0002006","1","1000"],["0.00023","1","6017.01162474"],["0.0002455","1","600"],["0.00025","3","12300"],["0.0002789","1","503"],["0.000279","1","2001"],["0.0002799","1","200000"],["0.0002999","1","5000"],["0.0003","2","1645.241116"],["0.000389","1","200000"],["0.0004","1","250"],["0.000425","1","50000"],["0.00045","1","50000"],["0.0005","2","20000"],["0.000535","1","10000"],["0.002","1","10000"],["0.09","2","5032.5551584"],["0.1","1","6333.84"],["1","2","195451"],["5","1","10000"],["8.075","1","2000"],["10","1","20000"],["11","1","5819.4995771"]]}
// console.log(orderBook.bids);

// console.log(newBid);

const zipOrderBook=(orderBook)=>{
  const newAsk = orderBook.asks.map(a=>{price:parseFloat(a[0]), count: parseFloat(a[1]), size: parseFloat(a[2])})
  const newBid = orderBook.bids.map(a=>{price:parseFloat(a[0]), count: parseFloat(a[1]), size: parseFloat(a[2])})
  return {bids: newBid, asks: newAsk}
}

console.log(zipOrderBook(orderBook));


// {"buyOrder":{"id":"5d405411-279a-4bff-848a-6d7a98d479fb","trading_pair_id":"MFG-ETH","side":"bid","type":"limit","price":0.0000289,"size":5000,"filled":0,"state":"open","timestamp":1526440624991,"eq_price":0,"completed_at":null},"balance":null,"orderBook":{"asks":[{"price":0.0000386,"count":1,"size":2209.96},{"price":0.0000387,"count":1,"size":2700},{"price":0.0000388,"count":1,"size":612},{"price":0.0000394,"count":1,"size":36250},{"price":0.0000403,"count":1,"size":12800},{"price":0.0000409,"count":2,"size":28751},{"price":0.0000411,"count":1,"size":800},{"price":0.0000433,"count":1,"size":1404.01287989},{"price":0.000044,"count":1,"size":600},{"price":0.0000442,"count":1,"size":600},{"price":0.0000447,"count":1,"size":600},{"price":0.000045,"count":2,"size":1200},{"price":0.0000453,"count":2,"size":3003},{"price":0.0000459,"count":1,"size":773.31406181},{"price":0.000046,"count":1,"size":600},{"price":0.0000462,"count":1,"size":8159.0485751},{"price":0.0000463,"count":1,"size":14798.26473208},{"price":0.0000467,"count":1,"size":600},{"price":0.0000469,"count":1,"size":1000},{"price":0.000047,"count":1,"size":1000},{"price":0.0000471,"count":1,"size":30000},{"price":0.0000476,"count":1,"size":51933.90191898},{"price":0.000048,"count":2,"size":12918.74642315},{"price":0.0000487,"count":1,"size":5000},{"price":0.0000493,"count":1,"size":7514.60378506},{"price":0.0000494,"count":1,"size":29471.47094442},{"price":0.0000498,"count":1,"size":10000},{"price":0.0000499,"count":3,"size":5496.0134562},{"price":0.00005,"count":1,"size":10000},{"price":0.0000501,"count":1,"size":600},{"price":0.0000503,"count":3,"size":2616},{"price":0.0000504,"count":3,"size":101044},{"price":0.0000505,"count":2,"size":3009},{"price":0.0000506,"count":1,"size":600},{"price":0.0000507,"count":1,"size":600},{"price":0.000051,"count":1,"size":25000},{"price":0.000052,"count":1,"size":553.88},{"price":0.0000523,"count":1,"size":10000},{"price":0.0000525,"count":1,"size":10000},{"price":0.0000532,"count":1,"size":2148.09523809},{"price":0.0000536,"count":1,"size":20000},{"price":0.000054,"count":1,"size":533},{"price":0.0000549,"count":2,"size":2536.19916506},{"price":0.000055,"count":5,"size":15539},{"price":0.0000551,"count":2,"size":5098},{"price":0.0000557,"count":1,"size":646.8318584},{"price":0.0000575,"count":2,"size":20001},{"price":0.0000588,"count":1,"size":50000},{"price":0.0000589,"count":1,"size":808},{"price":0.000059,"count":2,"size":11340.18518518}],"bids":[{"price":0.0000371,"count":1,"size":3867.43},{"price":0.000037,"count":1,"size":553},{"price":0.0000359,"count":2,"size":13870.9595},{"price":0.0000358,"count":1,"size":1000},{"price":0.0000354,"count":1,"size":553},{"price":0.0000334,"count":1,"size":5000},{"price":0.0000333,"count":1,"size":12000},{"price":0.0000332,"count":1,"size":10000},{"price":0.0000301,"count":1,"size":6000},{"price":0.000029,"count":1,"size":1724.14},{"price":0.0000289,"count":1,"size":5000},{"price":0.0000286,"count":1,"size":7000},{"price":0.0000285,"count":1,"size":10000},{"price":0.0000278,"count":1,"size":627},{"price":0.0000275,"count":1,"size":36363},{"price":0.0000272,"count":1,"size":10000},{"price":0.0000271,"count":1,"size":5000},{"price":0.000027,"count":1,"size":10000},{"price":0.000026,"count":1,"size":10000},{"price":0.000025,"count":1,"size":10000},{"price":0.0000235,"count":1,"size":3500},{"price":0.0000233,"count":1,"size":10000},{"price":0.0000209,"count":1,"size":8182},{"price":0.0000174,"count":1,"size":20873},{"price":0.0000173,"count":1,"size":20000},{"price":0.000016,"count":1,"size":3321},{"price":0.0000151,"count":1,"size":25000},{"price":0.000015,"count":1,"size":6659},{"price":0.0000108,"count":1,"size":12978.7234043},{"price":0.0000103,"count":1,"size":13890.29126568},{"price":0.00001,"count":1,"size":10000},{"price":0.0000067,"count":1,"size":6049.6715694},{"price":0.0000066,"count":1,"size":5093.4880722},{"price":0.0000063,"count":1,"size":22000.00000011},{"price":0.000006,"count":1,"size":1000},{"price":0.0000059,"count":1,"size":92546.10169495},{"price":0.0000058,"count":1,"size":10000},{"price":0.0000025,"count":1,"size":15271.4508},{"price":0.0000024,"count":1,"size":45000},{"price":0.0000022,"count":1,"size":31914.89361737},{"price":0.0000019,"count":1,"size":14065.80521052},{"price":0.0000018,"count":1,"size":37249.99999997},{"price":0.0000017,"count":1,"size":44744.70588236},{"price":3e-7,"count":1,"size":72751.17861668},{"price":2e-7,"count":1,"size":500000},{"price":1e-7,"count":2,"size":418.61080401}]},"opPrice":0.00003421,"sellOrder":null,"orderId":null}